
<div class="dropdown margin-top-bottom">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    排序方式
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <%= link_to "最後回覆時間", articles_path(tag: 'last_replied_at'), class: 'dropdown-item' %>
    <%= link_to "回覆數", articles_path(tag: 'comments_count'), class: 'dropdown-item' %>
    <%= link_to "觀看數", articles_path(tag: 'views_count'), class: 'dropdown-item' %>
  </div>
</div>
<table class="table">
  <thead>
    <th scope="col">回覆數</th>
    <th scope="col">標題</th>
    <th scope="col">內容</th> 
    <th scope="col">最後回覆時間</th>
    <th scope="col">觀看次數</th>
    <th scope="col">作者</th>
  </thead>
  <tbody>
    <!-- 在前端擋住不能show的文章 -->
    <% @articles.each do |article| %>
      <% if article_can_show?(article) %>
        <tr>
          <td><%= article.comments_count %></td>
          <td>
            <%= link_to article.title, article %>
          </td>
          <td><%= truncate article.content %></td>
          <td><%= last_replied_at(article) %></td>
          <td><i class="fa fa-eye fa-lg"> </i> <%= article.views_count %></td>
          <td><%= link_to article.user.name, article.user %></td>
        </tr> 
      <% end %>
    <% end %>
  </tbody>
</table>

<%= paginate @articles %>
